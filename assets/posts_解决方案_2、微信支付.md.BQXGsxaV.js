import{_ as p,c as t,G as e,b as o}from"./chunks/framework.BrC0DRXd.js";const a=JSON.parse('{"title":"微信支付","description":"介绍了微信支付的产品介绍、接入指引、支付安全、证书/秘钥/签名、API密钥和APIv3密钥","frontmatter":{"title":"微信支付","date":"2023-09-07T00:00:00.000Z","author":"liuwy","categories":["专题"],"tags":["支付"],"description":"介绍了微信支付的产品介绍、接入指引、支付安全、证书/秘钥/签名、API密钥和APIv3密钥","articleGPT":"介绍了微信支付的产品介绍、接入指引、支付安全、证书/秘钥/签名、API密钥和APIv3密钥","head":[["link",{"rel":"canonical","href":"https://indulgeback.github.io/posts/解决方案/2、微信支付"}]]},"headers":[],"relativePath":"posts/解决方案/2、微信支付.md","filePath":"posts/解决方案/2、微信支付.md","lastUpdated":1740135853000}');const c=p({name:"posts/解决方案/2、微信支付.md"},[["render",function(p,a,c,l,r,i){return o(),t("div",null,a[0]||(a[0]=[e('<h2 id="_1、微信支付产品介绍" tabindex="-1">1、微信支付产品介绍 <a class="header-anchor" href="#_1、微信支付产品介绍" aria-label="Permalink to &quot;1、微信支付产品介绍&quot;">​</a></h2><blockquote><p>1.1、付款码支付</p><p>用户展示微信钱包内的“付款码”给商家，商家扫描后直接完成支付，适用于线下面对面收银的场景。</p></blockquote><blockquote><p>1.2、JSAPI支付</p><p>线下场所：商户展示一个支付二维码，用户使用微信扫描二维码后，输入需要支付的金额，完成支付。</p><p>公众号场景：用户在微信内进入商家公众号，打开某个页面，选择某个产品，完成支付。</p><p>PC网站场景：在网站中展示二维码，用户使用微信扫描二维码，输入需要支付的金额，完成支付。</p><p>特点：用户在客户端输入支付金额</p></blockquote><blockquote><p>1.3、小程序支付</p><p>在微信小程序平台内实现支付的功能。</p></blockquote><blockquote><p>1.4、Native支付</p><p>Native支付是指商户展示支付二维码，用户再用微信“扫一扫”完成支付的模式。这种方式适用于PC网 站。 特点：商家预先指定支付金额</p></blockquote><blockquote><p>1.5、APP支付</p><p>商户通过在移动端独立的APP应用程序中集成微信支付模块，完成支付。</p></blockquote><blockquote><p>1.6、刷脸支付</p><p>用户在刷脸设备前通过摄像头刷脸、识别身份后进行的一种支付方式。</p></blockquote><h2 id="_2、接入指引" tabindex="-1">2、接入指引 <a class="header-anchor" href="#_2、接入指引" aria-label="Permalink to &quot;2、接入指引&quot;">​</a></h2><blockquote><p>2.1、获取商户号</p><p>微信商户平台：<a href="https://pay.weixin.qq.com/" target="_blank" rel="noreferrer">https://pay.weixin.qq.com/</a></p><p>场景：Native支付</p><p>步骤：提交资料 =&gt; 签署协议 =&gt; 获取商户号</p></blockquote><blockquote><p>2.2、获取APPID</p><p>微信公众平台：<a href="https://mp.weixin.qq.com/" target="_blank" rel="noreferrer">https://mp.weixin.qq.com/</a></p><p>步骤：注册服务号 =&gt; 服务号认证 =&gt; 获取APPID =&gt; 绑定商户号</p></blockquote><blockquote><p>2.3、获取API秘钥</p><p>APIv2版本的接口需要此秘钥</p><p>步骤：登录商户平台 =&gt; 选择 账户中心 =&gt; 安全中心 =&gt; API安全 =&gt; 设置API密钥</p></blockquote><blockquote><p>2.4、获取APIv3秘钥</p><p>APIv3版本的接口需要此秘钥</p><p>步骤：登录商户平台 =&gt; 选择 账户中心 =&gt; 安全中心 =&gt; API安全 =&gt; 设置APIv3密钥</p><p>随机密码生成工具：<a href="https://suijimimashengcheng.bmcx.com/" target="_blank" rel="noreferrer">https://suijimimashengcheng.bmcx.com/</a></p></blockquote><blockquote><p>2.5、申请商户API证书</p><p>APIv3版本的所有接口都需要；</p><p>APIv2版本的高级接口需要（如：退款、企业红包、企业付款等）</p><p>步骤：登录商户平台 =&gt; 选择 账户中心 =&gt; 安全中心 =&gt; API安全 =&gt; 申请API证书</p></blockquote><blockquote><p>2.6、获取微信平台证书</p><p>可以预先下载，也可以通过编程的方式获取。</p></blockquote><blockquote><p>==注意：以上所有API秘钥和证书需妥善保管防止泄露==</p></blockquote><h2 id="_3、支付安全-证书-秘钥-签名" tabindex="-1">3、支付安全（证书/秘钥/签名） <a class="header-anchor" href="#_3、支付安全-证书-秘钥-签名" aria-label="Permalink to &quot;3、支付安全（证书/秘钥/签名）&quot;">​</a></h2><blockquote><p>3.1、信息安全的基础 - 机密性</p><p>明文：加密前的消息叫“明文”（plain text）</p><p>密文：加密后的文本叫“密文”（cipher text）</p><p>密钥：只有掌握特殊“钥匙”的人，才能对加密的文本进行解密，这里的“钥匙”就叫做“密钥”（key）“密钥”就是一个字符串，度量单位是“位”（bit），比如，密钥长度是 128，就是 16 字节的二 进制串 加密：实现机密性最常用的手段是“加密”（encrypt） 按照密钥的使用方式，加密可以分为两大类：对称加密和非对称加密。</p><p>解密：使用密钥还原明文的过程叫“解密”（decrypt）</p><p>加密算法：加密解密的操作过程就是“加密算法” 所有的加密算法都是公开的，而算法使用的“密钥”则必须保密</p></blockquote><blockquote><p>3.2、对称加密和非对称加密</p><p>对称加密</p><p>特点：只使用一个密钥，密钥必须保密，常用的有 AES算法 优点：运算速度快 缺点：秘钥需要信息交换的双方共享，一旦被窃取，消息会被破解，无法做到安全的密钥交换</p><p>非对称加密</p><p>特点：使用两个密钥：公钥和私钥，公钥可以任意分发而私钥保密，常用的有 RSA 优点：黑客获取公钥无法破解密文，解决了密钥交换的问题 缺点：运算速度非常慢 混合加密 实际场景中把对称加密和非对称加密结合起来使用。</p></blockquote><blockquote><p>3.3、身份认证</p><p>公钥加密，私钥解密的作用是加密信息</p><p>私钥加密，公钥解密的作用是身份认证</p></blockquote><blockquote><p>3.4、摘要算法（Digest Algorithm）</p><p>摘要算法就是我们常说的散列函数、哈希函数（Hash Function），它能够把任意长度的数据“压缩”成 固定长度、而且独一无二的“摘要”字符串，就好像是给这段数据生成了一个数字“指纹”。</p><p>作用： 保证信息的完整性</p><p>特性：</p><p>==不可逆==：只有算法，没有秘钥，只能加密，不能解密</p><p>==难题友好性==：想要破解，只能暴力枚举</p><p>==发散性==：只要对原文进行一点点改动，摘要就会发生剧烈变化</p><p>==抗碰撞性==：原文不同，计算后的摘要也要不同</p><p>常见摘要算法： MD5、SHA1、SHA2（SHA224、SHA256、SHA384）</p></blockquote><blockquote><p>3.5、数字签名</p><p>数字签名是使用私钥对摘要加密生成签名，需要由公钥将签名解密后进行验证，实现身份认证和不可否 认 签名和验证签名的流程：</p></blockquote><blockquote><p>3.6、数字证书 数字证书解决“公钥的信任”问题，可以防止黑客伪造公钥。 不能直接分发公钥，公钥的分发必须使用数字证书，数字证书由CA颁发 https协议中的数字证书</p></blockquote><blockquote><p>3.7、微信APIv3证书</p><p>商户证书： 商户API证书是指由商户申请的，包含商户的商户号、公司名称、公钥信息的证书。</p><p>商户证书在商户后台申请：<a href="https://pay.weixin.qq.com/index.php/core/cert/api_cert#/" target="_blank" rel="noreferrer">https://pay.weixin.qq.com/index.php/core/cert/api_cert#/</a></p></blockquote><blockquote><p>平台证书（微信支付平台）： 微信支付平台证书是指由微信支付 负责申请的，包含微信支付平台标识、公钥信息的证书。</p><p>商户可以使 用平台证书中的公钥进行验签。 平台证书的获取：<a href="https://pay.weixin.qq.com/wiki/doc/apiv3/wechatpay/wechatpay3_0.shtml" target="_blank" rel="noreferrer">https://pay.weixin.qq.com/wiki/doc/apiv3/wechatpay/wechatpay3_0.shtml</a></p></blockquote><blockquote><p>3.8、API密钥和APIv3密钥 都是对称加密需要使用的加密和解密密钥，一定要保管好，不能泄露。 API密钥对应V2版本的API APIv3密钥对应V3版本的API</p></blockquote>',25)]))}]]);export{a as __pageData,c as default};
